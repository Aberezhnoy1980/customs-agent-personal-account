# CustomsAgentPersonalAccount

## Проект:

Личный кабинет клиента таможенного представителя

## Цель

Создать личный кабинет клиента таможенного представителя со следующим функционалом:
 - Регистрация, авторизация и аутентификация 
 - Отслеживание статуса таможенных деклараций клиента 
 - Возможность получить Excel выгрузку по декларациям
 - Отражает статистику по заданным параметрам (срок выпуска; %дт поданных после 12:00, %ДТ выпущенных на второй день, % ДТ с досмотром (список открытый может меняться под нужды клиента))
 - Формировать группу рассылки почтовых уведомлений о выпуске ДТ

## Функционал:

### Авторизация и аутентификация

Перед началом работы с порталом клиент обязан предоставить перечень лиц, которые могут иметь доступ к порталу. 
Также клиент назначает лицо, которое будет являться администратором и будет иметь возможность регистрировать новых пользователей с привязкой к данной компании (соответственно 2 роли - user и  client_admin).

### Личный кабинет

После авторизации на портале пользователь переадресовывается в личный кабинет клиента (компании). 
В верхней части личного кабинета отражаются показатели статистики, а также информация о кол-ве ДТ, поданных, но не выпущенных на текущий момент времени. 
Под  данными статистики в табличной форме отображается информация о последних 50 декларациях на товары (параметр настраиваемый), поданных таможенным представителем от имени компании (привязка по ИНН).

#### Пример таблицы 

№ ДТ | Грузоотправитель | Дата подачи | Дата выпуска / отказа | Статус | Стоимость груза | Валюта | Скачать ДТ

В личном кабинете должна быть предусмотрена поисковая строка (поиск по № ДТ).Также должна быть обеспечена возможность фильтровать данные в табличной форме.
Для пользователя с ролью client_admin должна быть ссылка для перехода на страницу администрирования.
Страница должна иметь кнопку (иконку) для обновления данных.

### Страница администрирования

На странице администрирования выполняется следующий функционал:
 - Добавление новых пользователей с привязкой к клиенту 
 - Удаление пользователей, привязанных к клиенту 
 - Формирование списка рассылки с почтовыми адресами, на которые отправляется уведомление о выпуске ДТ (Текст “ДТ №… по инвойсу № … от .. от компании … выпущена (дата и время выпуска)).

## Технологии

### Back-end

 - Java 11
 - Spring Boot 
 - Spring-WS, Spring Security, JWT, Spring Data JPA, 
 - Spring Cloud Gateway
 - H2, PostgreSql, Liquibase 
 - Docker 
 - Redis 
 - Swagger, 
 - Lombok,

### Front-end

 - HTML
 - Angular
 - JavaScript, CSS

## Запуск приложений

Все микросервисы запускаются как обычные Spring Boot приложения.

### Профили для запуска сервисов

#### Core-service
 - dev - запуск для локальной разработки используя базу H2
 - prod - запуск для работы используя базу Postgresql
 - test - профиль для тестирования сервиса с использованием базы H2

### Запуск docker контейнера с базой postgresql и redis

```sh
docker-compose -f docker-compose-customs.yml up
```

Чтобы открыть приложение в браузере необходимо перейти по адресу

```sh
localhost:3000
```




